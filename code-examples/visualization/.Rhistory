scale_x_discrete(element_blank(), labels=capitalize_all) +
theme(axis.text.x=element_text(angle=45, hjust=1, vjust=1)) +
theme(legend.position='bottom', legend.title=element_blank())
p
load('~/Downloads/sqf.RData')
load('~/Downloads/sqf.RData')
str(stops)
levels(stops$location.housing)
stops_filtered <- stops %>%
filter(suspected.crime == 'cpw')
overall_hitrate_by_race <- stops_filtered %>%
group_by(suspect.race) %>%
summarize(hit_rate=sum(found.weapon)/n())
overall_hitrate_by_race
or(1, 0)
or
?or
TRUE | FALSE
FALSE | TRUE
FALSE || TRUE
FALSE || TRUE
stops_filtered <- stops %>%
filter(suspected.crime=='cpw') %>%
mutate(hit=found.weapon || found.pistol || found.rifle || found.knife ||
found.machinegun || found.gun)
overall_hitrate_by_race <- stops_filtered %>%
group_by(suspect.race) %>%
summarize(hit_rate=sum(hit)/n())
overall_hitrate_by_race
stops_filtered <- stops %>%
filter(suspected.crime=='cpw') %>%
mutate(hit=(found.weapon || found.pistol || found.rifle || found.knife ||
found.machinegun || found.gun))
overall_hitrate_by_race <- stops_filtered %>%
group_by(suspect.race) %>%
summarize(hit_rate=sum(hit)/n())
overall_hitrate_by_race
sum(stops_filtered$found.gun)
sum(stops_filtered$found.weapon)
sum(stops_filtered$hit)
stops_filtered <- stops %>%
filter(suspected.crime=='cpw') %>%
mutate(hit=(found.weapon | found.pistol | found.rifle | found.knife |
found.machinegun | found.gun))
sum(stops_filtered$hit)
sum(stops_filtered$found.weapon)
stops_filtered <- stops %>%
filter(suspected.crime=='cpw')
overall_hitrate_by_race <- stops_filtered %>%
group_by(suspect.race) %>%
summarize(hit_rate=sum(found.weapon)/n())
hitrate_by_precinct <- stops_filtered %>%
filter(race %in% c('black', 'white')) %>%
spread(race)
hitrate_by_precinct <- stops_filtered %>%
filter(race %in% c('black', 'white')) %>%
group_by(precinct, race) %>%
summarize(count=n())
hitrate_by_precinct <- stops_filtered %>%
filter(suspect.race %in% c('black', 'white')) %>%
group_by(precinct, suspect.race) %>%
summarize(count=n())
head(hitrate_by_precinct)
hitrate_by_precinct <- stops_filtered %>%
filter(suspect.race %in% c('black', 'white')) %>%
group_by(precinct, suspect.race) %>%
summarize(count=n()) %>%
spread(race, count)
hitrate_by_precinct <- stops_filtered %>%
filter(suspect.race %in% c('black', 'white')) %>%
group_by(precinct, suspect.race) %>%
summarize(hits=sum(found.weapon), count=n(), hitrate=hits/count)
hitrate_by_precinct
hitrate_by_precinct <- stops_filtered %>%
filter(suspect.race %in% c('black', 'white')) %>%
group_by(precinct, suspect.race) %>%
summarize(hits=sum(found.weapon), count=n(), hitrate=hits/count) %>%
ungroup() %>%
spread(suspect.race, hitrate)
hitrate_by_precinct
hitrate_by_precinct <- stops_filtered %>%
filter(suspect.race %in% c('black', 'white')) %>%
group_by(precinct, suspect.race) %>%
summarize(hitrate=sum(found.weapon)/n()) %>%
ungroup() %>%
spread(suspect.race, hitrate)
hitrate_by_precinct
hitrate_by_location <- stops_filtered %>%
filter(suspect.race %in% c('black', 'white')) %>%
group_by(precinct, location.housing, suspect.race) %>%
summarize(hitrate=sum(found.weapon)/n()) %>%
ungroup() %>%
spread(suspect.race, hitrate)
hitrate_by_location
max(hitrate_by_location$white)
max(hitrate_by_location$white, na.rm=T)
save(overall_hitrate_by_race, hitrate_by_location, hitrate_by_precinct, file='/share/data/cssbook/data/sqf.Rdata')
load('../../../data/sqf.Rdata')
p <- ggplot(data=hitrate_by_precinct, aes(x=black, y=white)) +
geom_point() +
scale_x_continuous('\nHit rate for black suspects') +
scale_y_continuous('\nHit rate for white suspects')
p
p <- ggplot(data=hitrate_by_precinct, aes(x=black, y=white)) +
geom_point(size=1) +
scale_x_continuous('\nHit rate for black suspects') +
scale_y_continuous('\nHit rate for white suspects')
p
p <- ggplot(data=hitrate_by_precinct, aes(x=black, y=white)) +
geom_point(size=1) +
scale_x_continuous('\nHit rate for black suspects', labels=percent) +
scale_y_continuous('\nHit rate for white suspects', labels=percent)
p
hitrate_by_location <- complete.cases(hitrate_by_location)
hitrate_by_precinct <- complete.cases(hitrate_by_precinct)
save(overall_hitrate_by_race, hitrate_by_location, hitrate_by_precinct, file='/share/data/cssbook/data/sqf.Rdata')
p <- ggplot(data=hitrate_by_precinct, aes(x=black, y=white)) +
geom_point(size=1) +
scale_x_continuous('\nHit rate for black suspects', labels=percent) +
scale_y_continuous('\nHit rate for white suspects', labels=percent)
p
p <- ggplot(data=hitrate_by_precinct, aes(x=black, y=white)) +
geom_point(size=1) +
scale_x_continuous('\nHit rate for black suspects', labels=percent) +
scale_y_continuous('\nHit rate for white suspects', labels=percent)
hitrate_by_location
hitrate_by_precinct <- stops_filtered %>%
filter(suspect.race %in% c('black', 'white')) %>%
group_by(precinct, suspect.race) %>%
summarize(hitrate=sum(found.weapon)/n()) %>%
ungroup() %>%
spread(suspect.race, hitrate)
hitrate_by_location <- stops_filtered %>%
filter(suspect.race %in% c('black', 'white')) %>%
group_by(precinct, location.housing, suspect.race) %>%
summarize(hitrate=sum(found.weapon)/n()) %>%
ungroup() %>%
spread(suspect.race, hitrate)
load('~/Downloads/sqf.RData')
stops_filtered <- stops %>%
filter(suspected.crime=='cpw')
overall_hitrate_by_race <- stops_filtered %>%
group_by(suspect.race) %>%
summarize(hit_rate=sum(found.weapon)/n())
hitrate_by_precinct <- stops_filtered %>%
filter(suspect.race %in% c('black', 'white')) %>%
group_by(precinct, suspect.race) %>%
summarize(hitrate=sum(found.weapon)/n()) %>%
ungroup() %>%
spread(suspect.race, hitrate)
hitrate_by_location <- stops_filtered %>%
filter(suspect.race %in% c('black', 'white')) %>%
group_by(precinct, location.housing, suspect.race) %>%
summarize(hitrate=sum(found.weapon)/n()) %>%
ungroup() %>%
spread(suspect.race, hitrate)
hitrate_by_location <- hitrate_by_location[complete.cases(hitrate_by_location), ]
hitrate_by_precinct <- hitrate_by_precinct[complete.cases(hitrate_by_precinct), ]
save(overall_hitrate_by_race, hitrate_by_location, hitrate_by_precinct, file='/share/data/cssbook/data/sqf.Rdata')
p <- ggplot(data=hitrate_by_precinct, aes(x=black, y=white)) +
geom_point(size=1) +
scale_x_continuous('\nHit rate for black suspects',
labels=percent, limits=c(0, .3)) +
scale_y_continuous('\nHit rate for white suspects',
labels=percent, limits=c(0, .5))
p
p <- ggplot(data=hitrate_by_precinct, aes(x=black, y=white)) +
geom_point(size=1) +
scale_x_continuous('\nHit rate for black suspects',
labels=percent, limits=c(0, .5)) +
scale_y_continuous('Hit rate for white suspects\n',
labels=percent, limits=c(0, .5))
p
p <- ggplot(data=hitrate_by_precinct, aes(x=black, y=white)) +
geom_point(size=1) +
geom_abline(slope=1, intercept=0) +
scale_x_continuous('\nHit rate for black suspects',
labels=percent, limits=c(0, .5)) +
scale_y_continuous('Hit rate for white suspects\n',
labels=percent, limits=c(0, .5))
p
p <- ggplot(data=hitrate_by_precinct, aes(x=black, y=white)) +
geom_point(size=1) +
geom_abline(slope=1, intercept=0, linetype='dashed') +
scale_x_continuous('\nHit rate for black suspects',
labels=percent, limits=c(0, .5)) +
scale_y_continuous('Hit rate for white suspects\n',
labels=percent, limits=c(0, .5))
p
unique(hitrate_by_location$location.housing)
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing), alpha=.6) +
scale_color_discrete(breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',
labels=percent, limits=c(0, .3)) +
scale_y_continuous('Hit rate for white suspects\n',
labels=percent, limits=c(0, .5))
p
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing), alpha=.6) +
scale_color_discrete(breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',
labels=percent, limits=c(0, .8)) +
scale_y_continuous('Hit rate for white suspects\n',
labels=percent, limits=c(0, .8)) +
theme(legend.location=c(1, 0), legend.justification=c(1, 0))
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing), alpha=.6) +
scale_color_discrete(breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',
labels=percent, limits=c(0, .8)) +
scale_y_continuous('Hit rate for white suspects\n',
labels=percent, limits=c(0, .8)) +
theme(legend.position=c(1, 0), legend.justification=c(1, 0))
p
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing), alpha=.6) +
scale_color_discrete(breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',
labels=percent, limits=c(0, .8)) +
scale_y_continuous('Hit rate for white suspects\n',
labels=percent, limits=c(0, .8)) +
theme(legend.position=c(1, 0), legend.justification=c(1, 0), legend.background=element_blank())
p
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing), alpha=.6) +
scale_color_discrete(element_blank(),
breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',
labels=percent, limits=c(0, .8)) +
scale_y_continuous('Hit rate for white suspects\n',
labels=percent, limits=c(0, .8)) +
theme(legend.position=c(1, 0), legend.justification=c(1, 0),
legend.background=element_blank())
p
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing), alpha=.6) +
geom_abline(slope=1, intercept=0, linetype='dashed') +
scale_color_discrete(element_blank(),
breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_log10('\nHit rate for black suspects',
labels=percent, limits=c(0, .8)) +
scale_y_log10('Hit rate for white suspects\n',
labels=percent, limits=c(0, .8)) +
theme(legend.position=c(1, 0), legend.justification=c(1, 0),
legend.background=element_blank())
p
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing), alpha=.6) +
geom_abline(slope=1, intercept=0, linetype='dashed') +
scale_color_discrete(element_blank(),
breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_log10('\nHit rate for black suspects',
labels=percent) +
scale_y_log10('Hit rate for white suspects\n',
labels=percent) +
theme(legend.position=c(1, 0), legend.justification=c(1, 0),
legend.background=element_blank())
p
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing), alpha=.6) +
geom_abline(slope=1, intercept=0, linetype='dashed') +
scale_color_discrete(element_blank(),
breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_log('\nHit rate for black suspects',
labels=percent) +
scale_y_log('Hit rate for white suspects\n',
labels=percent) +
theme(legend.position=c(1, 0), legend.justification=c(1, 0),
legend.background=element_blank())
p
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing), alpha=.6) +
geom_abline(slope=1, intercept=0, linetype='dashed') +
scale_color_discrete(element_blank(),
breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',
labels=percent, trans='log') +
scale_y_continuous('Hit rate for white suspects\n',
labels=percent, trans='log') +
theme(legend.position=c(1, 0), legend.justification=c(1, 0),
legend.background=element_blank())
p
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing), alpha=.6) +
geom_abline(slope=1, intercept=0, linetype='dashed') +
scale_color_discrete(element_blank(),
breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',
labels=percent, trans='log2') +
scale_y_continuous('Hit rate for white suspects\n',
labels=percent, trans='log2') +
theme(legend.position=c(1, 0), legend.justification=c(1, 0),
legend.background=element_blank())
p
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing), alpha=.6) +
geom_abline(slope=1, intercept=0, linetype='dashed') +
scale_color_discrete(element_blank(),
breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',
labels=percent, trans='log1p') +
scale_y_continuous('Hit rate for white suspects\n',
labels=percent, trans='log1p') +
theme(legend.position=c(1, 0), legend.justification=c(1, 0),
legend.background=element_blank())
p
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing), alpha=.6) +
geom_abline(slope=1, intercept=0, linetype='dashed') +
scale_color_discrete(element_blank(),
breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',
labels=percent, trans='log1p', limits=c(0, 1)) +
scale_y_continuous('Hit rate for white suspects\n',
labels=percent, trans='log1p', limits=c(0, 1)) +
theme(legend.position=c(1, 0), legend.justification=c(1, 0),
legend.background=element_blank())
p
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing), alpha=.6) +
geom_abline(slope=1, intercept=0, linetype='dashed') +
scale_color_discrete(element_blank(),
breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',
labels=percent, trans='log', limits=c(0, 1)) +
scale_y_continuous('Hit rate for white suspects\n',
labels=percent, trans='log', limits=c(0, 1)) +
theme(legend.position=c(1, 0), legend.justification=c(1, 0),
legend.background=element_blank())
p
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing), alpha=.6) +
geom_abline(slope=1, intercept=0, linetype='dashed') +
scale_color_discrete(element_blank(),
breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',
labels=percent, trans='log', limits=c(0.003, 1)) +
scale_y_continuous('Hit rate for white suspects\n',
labels=percent, trans='log', limits=c(0.003, 1)) +
theme(legend.position=c(1, 0), legend.justification=c(1, 0),
legend.background=element_blank())
p
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing), alpha=.6) +
geom_abline(slope=1, intercept=0, linetype='dashed') +
scale_color_discrete(element_blank(),
breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',
labels=percent, trans='log2', limits=c(0.003, 1)) +
scale_y_continuous('Hit rate for white suspects\n',
labels=percent, trans='log2', limits=c(0.003, 1)) +
theme(legend.position=c(1, 0), legend.justification=c(1, 0),
legend.background=element_blank())
p
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing), alpha=.6) +
geom_abline(slope=1, intercept=0, linetype='dashed') +
scale_color_discrete(element_blank(),
breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',
labels=percent, trans='log10', limits=c(0.003, 1)) +
scale_y_continuous('Hit rate for white suspects\n',
labels=percent, trans='log10', limits=c(0.003, 1)) +
theme(legend.position=c(1, 0), legend.justification=c(1, 0),
legend.background=element_blank())
p
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing), alpha=.6) +
geom_abline(slope=1, intercept=0, linetype='dashed') +
scale_color_discrete(element_blank(),
breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',  labels=percent,
trans='log10', limits=c(0.003, 1),
breaks=c(.003, .01, .03, .1, .3, 1)) +
scale_y_continuous('Hit rate for white suspects\n',  labels=percent,
trans='log10', limits=c(0.003, 1),
breaks=c(.003, .01, .03, .1, .3, 1)) +
theme(legend.position=c(1, 0), legend.justification=c(1, 0),
legend.background=element_blank())
p
hitrate_by_location <- stops_filtered %>%
filter(suspect.race %in% c('black', 'white')) %>%
group_by(precinct, location.housing) %>%
mutate(count=n()) %>%
group_by(precinct, location.housing, suspect.race) %>%
summarize(count, hitrate=sum(found.weapon)/n()) %>%
ungroup() %>%
spread(suspect.race, hitrate)
hitrate_by_location <- stops_filtered %>%
filter(suspect.race %in% c('black', 'white')) %>%
group_by(precinct, location.housing) %>%
mutate(count=n()) %>%
group_by(precinct, location.housing, suspect.race) %>%
summarize(count=count, hitrate=sum(found.weapon)/n()) %>%
ungroup() %>%
spread(suspect.race, hitrate)
hitrate_by_location <- stops_filtered %>%
filter(suspect.race %in% c('black', 'white')) %>%
group_by(precinct, location.housing) %>%
mutate(count=n()) %>%
group_by(precinct, location.housing, suspect.race) %>%
summarize(count=max(count), hitrate=sum(found.weapon)/n()) %>%
ungroup() %>%
spread(suspect.race, hitrate)
head(hitrate_by_location)
hitrate_by_location <- hitrate_by_location[complete.cases(hitrate_by_location), ]
save(overall_hitrate_by_race, hitrate_by_location, hitrate_by_precinct, file='/share/data/cssbook/data/sqf.Rdata')
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing, size=count), alpha=.6) +
geom_abline(slope=1, intercept=0, linetype='dashed') +
scale_color_discrete(element_blank(),
breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',  labels=percent,
trans='log10', limits=c(0.003, 1),
breaks=c(.003, .01, .03, .1, .3, 1)) +
scale_y_continuous('Hit rate for white suspects\n',  labels=percent,
trans='log10', limits=c(0.003, 1),
breaks=c(.003, .01, .03, .1, .3, 1)) +
theme(legend.position=c(1, 0), legend.justification=c(1, 0),
legend.background=element_blank())
p
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing, size=count), alpha=.6) +
geom_abline(slope=1, intercept=0, linetype='dashed') +
scale_size_area(guides=FALSE) +
scale_color_discrete(element_blank(),
breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',  labels=percent,
trans='log10', limits=c(0.003, 1),
breaks=c(.003, .01, .03, .1, .3, 1)) +
scale_y_continuous('Hit rate for white suspects\n',  labels=percent,
trans='log10', limits=c(0.003, 1),
breaks=c(.003, .01, .03, .1, .3, 1)) +
theme(legend.position=c(1, 0), legend.justification=c(1, 0),
legend.background=element_blank())
p
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing, size=count), alpha=.6) +
geom_abline(slope=1, intercept=0, linetype='dashed') +
scale_size_area(guide=FALSE) +
scale_color_discrete(element_blank(),
breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',  labels=percent,
trans='log10', limits=c(0.003, 1),
breaks=c(.003, .01, .03, .1, .3, 1)) +
scale_y_continuous('Hit rate for white suspects\n',  labels=percent,
trans='log10', limits=c(0.003, 1),
breaks=c(.003, .01, .03, .1, .3, 1)) +
theme(legend.position=c(1, 0), legend.justification=c(1, 0),
legend.background=element_blank())
p
hitrate_by_location <- hitrate_by_location[complete.cases(hitrate_by_location), ]
hitrate_by_precinct <- hitrate_by_precinct[complete.cases(hitrate_by_precinct), ]
save(overall_hitrate_by_race, hitrate_by_location, hitrate_by_precinct, file='/share/data/cssbook/data/sqf.Rdata')
p <- ggplot(data=hitrate_by_location, aes(x=black, y=white,
group=location.housing)) +
geom_point(aes(color=location.housing, size=count), alpha=.6) +
geom_abline(slope=1, intercept=0, linetype='dashed') +
scale_size_area(guide=FALSE) +
scale_color_discrete(element_blank(),
breaks=c('housing', 'neither', 'transit'),
labels=c('Public housing', 'Pedestrian', 'Transit')) +
scale_x_continuous('\nHit rate for black suspects',  labels=percent,
trans='log10', limits=c(0.003, 1),
breaks=c(.003, .01, .03, .1, .3, 1)) +
scale_y_continuous('Hit rate for white suspects\n',  labels=percent,
trans='log10', limits=c(0.003, 1),
breaks=c(.003, .01, .03, .1, .3, 1)) +
theme(legend.position=c(1, 0), legend.justification=c(1, 0),
legend.background=element_blank())
p
